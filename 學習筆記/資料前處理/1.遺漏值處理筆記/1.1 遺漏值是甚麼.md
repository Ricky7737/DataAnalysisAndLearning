# 遺漏值是甚麼，還有如何處裡遺漏值
#### 而這個筆記參考 資料來源[1] 的教學文章，並選用 Kaggle Titanic 作為數據集練習
* Kaggle Titanic 資料連結 :  https://www.kaggle.com/competitions/titanic/data
## 1. 遺漏值介紹
### 1.1 遺漏值
#### 遺漏值在實際數據集中相當常見，而遺漏值會影響模型的 *性能* 或是 *準確度*。而遺漏值有不同形式的方式存在，所以我們必須選用合適的方法來處理。
* 遺漏值如下，會在資料中以 **NaN** 出現，代標這個格子缺乏一個數值
![image](https://github.com/Ricky7737/DataAnalysisAndLearning/assets/58324475/98eb04df-b4e8-4f74-8e7b-2340b8ec7d85)

### 1.2 遺漏值產生
  * 1.數據可能損壞或是不當維護缺失了數值
  * 2.可能某些原因人為遺漏的記錄的數值
  * 3.資料未被提供等因素
    
### 1.3 遺漏值種類 
#### 遺漏值有三種種類(MCAR、MNAR、MAR )
 * **1.MCAR(Missing Completely At Random, 隨機性的遺漏值)**
   ##### MCAR 數據缺失的概率對所有觀察值都是相同的，與數據其他變量無關。而這種遺漏值的產生可能是人為錯誤、系統或是設備故障。而這種遺漏值資料上來說分布比較不會影響資料的分布偏態。
   
 * **2.MAR(Missing At Random)**
   * 表示缺失數據的原因可以通過您擁有完整信息的變量來解釋，存在某種關係或模式。
   * 在MAR情況下，數據缺失的概率不同觀察值之間可能不同，但這種差異可以由其他已觀察到的變量來解釋
   * 缺失數據的出現取決於其他已知變量的值，但不能直接預測缺失值本身
   * 所以當這種遺漏值出現時，可能導致該資料出現偏差，所以必續特別處理確保分析不受到遺漏值的影響
   ##### 例如 : 今天做一個民意調查，然後性別為女性的受測者可能不願透漏年齡，就會變成遺漏值的形式出現
   
  * **3.MNAR(Missing Not At Random)**
    ##### MNAR 則表示遺漏值來自於未被觀察到的數據。例如在圖書館調查未歸還書籍的客人，可能無法接受該調查。或是說受訪者不願意在問卷中分享訊息

### 1.4 為甚麼要處理遺漏值
  * 1.許多機器學習演算法碰到遺漏值時可能會運算失敗。但部分方式有支持運算遺漏值的功能，例如 : K-nearest、Naive Bayes等
  * 2.如果未正確處理遺漏值，可能會導致最終訓練的模型 "預測" 或 "分類" 產生偏差
  * 3.如果忽略遺漏值，可能會使最後分析結果不夠精確，降低統計分析的結果可靠性，而無法有效解釋數據。

## 2. 遺漏值處理
### 2.1 知道遺漏值有多少個
#### 使用 Python 來檢查個欄位遺漏值
* 以 Titanic 的 train.csv 做為練習 :
```
import pandas as pd
row_TrainData = pd.read_csv(r'E:\DataLearn\4-Titanic\data\train.csv')
#檢查個欄位遺漏值數字
missing_TrainData = row_TrainData.isnull().sum()
missing_TrainData

out put:
assengerId      0
Survived         0
Pclass           0
Name             0
Sex              0
Age            177
SibSp            0
Parch            0
Ticket           0
Fare             0
Cabin          687
Embarked         2
dtype: int64
```
##### 從上面可以看到 Age、Cabin 與 Embarked 都有遺漏值

### 2.2 遺漏值常見處理方式
  * 1.刪除遺漏值 : 包含刪除含有遺漏值的行或列。但可能會遺失部分數據
  * 2.填補遺漏值 : 使用 **統計方式(例如:平均值(mean)、中位數(median)等)** 或是 **機器學習模型(例如:回歸或是K-nearest)** 。但這個可能會使模型有一小部分的偏差存在。
    ##### 以資料集中的 Age 欄位來做練習
    * **1. 計算 平均數(mean):** 
    ```
    import pandas as pd
    # 使用平均數來填補遺漏值
    mean_age_value = row_TrainData['Age'].mean().round().astype(int)
    print('age欄位平均數 : ', mean_age_value)
    
    out put :
    age欄位平均數 :  30
    ```
    * **2. 計算 中位數(mediam):** 
    ```
    median_age = row_TrainData['Age'].median()
    print('age欄位中位數 : ', median_age)

    output :
    age欄位中位數 :  28.0
    ```
    * **3. 計算 眾數(mode)**
    ```
    mode_age = row_TrainData['Age'].mode()
    # mode_age[0] 取出眾數列表中第一個眾數值
    print('age欄位最多的眾數 : ', mode_age[0])

    output :
    age欄位最多的眾數 :  24.0
    ```
    * **4.計算 標準差(std)**
    ```
    std_age = row_TrainData['Age'].std()
    print('age欄位標準差: ', std_age)

    output:
    age欄位標準差:  14.526497332334044
    ```
    
  * 3.對分類特徵添補遺漏值 : 當特徵中屬於分類時，真可以適當填補以處理遺漏的類別
  * 4. 使用 Sci-kit Learn 方式來填補遺漏值








#### 參考資料來源 :
* [1] https://www.analyticsvidhya.com/blog/2021/10/handling-missing-value/















